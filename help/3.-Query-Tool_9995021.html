<!DOCTYPE html>
<html>
 <head>
  <title>
   i2b2 Web Client : 3. Query Tool
  </title>
  <link href="styles/site.css" rel="stylesheet" type="text/css"/>
  <link href="i2b2Style.css" rel="stylesheet" type="text/css" />
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
 </head>
 <body class="theme-default aui-theme-default">
  <div class="wiki-content group" id="main-content">
   <div class="contentLayout2">
    <div class="columnLayout single" data-layout="single">
     <div class="cell normal" data-type="normal">
      <div class="innerCell">
       <div class="rwui_expandable_item rw_open ">
        <a class="rwui_expandable_item_title rwui_expand" data-hash="expand-TableofContents" id="rwui_expand-TableofContents" onclick="RWUI.toggleExpandItem(this);">
         <div class="rwui_icon">
         </div>
         Table of Contents
        </a>
        <div class="rwui_expandable_item_body rwui_body">
         <p>
          <style type="text/css">
           /*<![CDATA[*/
div.rbtoc1566411916676 {padding: 0px;}
div.rbtoc1566411916676 ul {list-style: none;margin-left: 0px;}
div.rbtoc1566411916676 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/
          </style>
          <div class="toc-macro rbtoc1566411916676">
           <ul class="toc-indentation">
            <li>
             <a href="#id-3.QueryTool-3.1Layout">
              3.1 Layout
             </a>
            </li>
            <li>
             <a href="#id-3.QueryTool-3.2CreatingaQuery">
              3.2 Creating a Query
             </a>
             <ul class="toc-indentation">
              <li>
               <a href="#id-3.QueryTool-3.2.1i2b2ItemsforQuerying">
                3.2.1 i2b2 Items for Querying
               </a>
              </li>
              <li>
               <a href="#id-3.QueryTool-3.2.1OperatorsandOrderofPrecedence">
                3.2.1 Operators and Order of Precedence
               </a>
              </li>
              <li>
               <a href="#id-3.QueryTool-3.2.2Constraints">
                3.2.2 Constraints
               </a>
              </li>
              <li>
               <a href="#id-3.QueryTool-3.2.3QueryTiming(inprogress)">
                3.2.3 Query Timing (in progress)
               </a>
              </li>
              <li>
               <a href="#id-3.QueryTool-3.2.4ReloadingaPreviousQuery(inprogress)">
                3.2.4 Reloading a Previous Query (in progress)
               </a>
              </li>
              <li>
               <a href="#id-3.QueryTool-3.2.5ResettingtheQueryTool(inprogress)">
                3.2.5 Resetting the Query Tool (in progress)
               </a>
              </li>
             </ul>
            </li>
            <li>
             <a href="#id-3.QueryTool-3.3RunningaQuery">
              3.3 Running a Query
             </a>
             <ul class="toc-indentation">
              <li>
               <a href="#id-3.QueryTool-3.3.1RunQuery">
                3.3.1 Run Query
               </a>
              </li>
              <li>
               <a href="#id-3.QueryTool-3.3.2QueryResultOptions">
                3.3.2 Query Result Options
               </a>
               <ul class="toc-indentation">
                <li>
                 <a href="#id-3.QueryTool-1)NumberofPatients">
                  1) Number of Patients
                 </a>
                </li>
                <li>
                 <a href="#id-3.QueryTool-2)Patient/EncounterSet">
                  2) Patient/Encounter Set
                 </a>
                </li>
                <li>
                 <a href="#id-3.QueryTool-4)PatientBreakdowns">
                  4) Patient Breakdowns
                 </a>
                </li>
               </ul>
              </li>
              <li>
               <a href="#id-3.QueryTool-3.3.3.QueryStatus(inprogress)">
                3.3.3. Query Status (in progress)
               </a>
               <ul class="toc-indentation">
                <li>
                 <a href="#id-3.QueryTool-1)Running">
                  1) Running
                 </a>
                </li>
                <li>
                 <a href="#id-3.QueryTool-2)Finished">
                  2) Finished
                 </a>
                </li>
                <li>
                 <a href="#id-3.QueryTool-3)Queued">
                  3) Queued
                 </a>
                </li>
                <li>
                 <a href="#id-3.QueryTool-4)Error">
                  4) Error
                 </a>
                </li>
               </ul>
              </li>
             </ul>
            </li>
            <li>
             <a href="#id-3.QueryTool-3.4ExampleQueries(inprogress)">
              3.4 Example Queries (in progress)
             </a>
             <ul class="toc-indentation">
              <li>
               <a href='#id-3.QueryTool-i.SimpleQuery:"FindingpatientswithadiagnosisAoradiagnosisBorhaslabtestC."'>
                i. Simple Query: "Finding patients with a diagnosis A or a diagnosis B or has lab test C."
               </a>
              </li>
              <li>
               <a href="#id-3.QueryTool-ii.RunningaPreviousQuery">
                ii. Running a Previous Query
               </a>
              </li>
              <li>
               <a href="#id-3.QueryTool-iii.TemporalQuery(Simple)">
                iii. Temporal Query (Simple)
               </a>
              </li>
              <li>
               <a href="#id-3.QueryTool-iv.HowtofindPatientswith&gt;1diagnosisXOR&gt;1diagnosisY(Usingnestedqueries)">
                iv.  How to find Patients with &gt;1 diagnosis X OR &gt;1 diagnosis Y  (Using nested queries)
               </a>
              </li>
             </ul>
            </li>
           </ul>
          </div>
          <div class="plugin_pagetree">
           <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
            <div class="plugin_pagetree_children">
            </div>
           </ul>
           <fieldset class="hidden">
            <input name="treeId" type="hidden" value=""/>
            <input name="treeRequestId" type="hidden" value="/wiki/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=true&amp;sort=position&amp;reverse=false&amp;disableLinks=false&amp;expandCurrent=false"/>
            <input name="treePageId" type="hidden" value="9995021"/>
            <input name="noRoot" type="hidden" value="false"/>
            <input name="rootPageId" type="hidden" value="9995021"/>
            <input name="rootPage" type="hidden" value=""/>
            <input name="startDepth" type="hidden" value="0"/>
            <input name="spaceKey" type="hidden" value="webclient"/>
            <input name="i18n-pagetree.loading" type="hidden" value="Loading..."/>
            <input name="i18n-pagetree.error.permission" type="hidden" value="Unable to load page tree. It seems that you do not have permission to view the root page."/>
            <input name="i18n-pagetree.eeror.general" type="hidden" value="There was a problem retrieving the page tree. Please check the server log file for more information."/>
            <input name="loginUrl" type="hidden" value=""/>
            <input name="mobile" type="hidden" value="false"/>
            <fieldset class="hidden">
             <input name="ancestorId" type="hidden" value="9995021"/>
            </fieldset>
           </fieldset>
          </div>
         </p>
        </div>
       </div>
       <p>
        <br/>
       </p>
       <p>
        <br/>
       </p>
       <p>
        The
        <strong>
         Query Tool
        </strong>
        panel is where queries are constructed and run.
       </p>
      </div>
     </div>
    </div>
    <div class="columnLayout single" data-layout="single">
     <div class="cell normal" data-type="normal">
      <div class="innerCell">
       <h2 id="id-3.QueryTool-3.1Layout">
        3.1 Layout
       </h2>
       <p>
        <span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size">
         <img class="confluence-embedded-image image-center" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/9995276.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-2_12-25-7.png" data-linked-resource-id="9995276" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/9995021/9995276.png" width="600"/>
        </span>
       </p>
       <ol>
        <li>
         <strong>
          Panel Options
         </strong>
         <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
          <img class="confluence-embedded-image confluence-thumbnail" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/12386463.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-7_15-56-48.png" data-linked-resource-id="12386463" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" height="21" src="attachments/9995021/12386463.png"/>
         </span>
         allow users to (1) view the XML exchange between the client and the i2b2 server (if enabled) , (2) set options for the panel, and (3) resize the panel.
        </li>
        <li>
         <strong>
          Query Name Display
         </strong>
         shows the name of the current query. Users can also drop a previous query here to load it.
        </li>
        <li>
         <strong>
          Query Timing Selector
         </strong>
         enables users to select the appropriate timings for their query, including temporal queries.
        </li>
        <li>
         <strong>
          Query Groups
         </strong>
         are where users can drag and drop terms to build queries. There are initially three Groups, but more can be added.
        </li>
        <li>
         <strong>
          Tool Bar
         </strong>
         contains buttons to run queries, clear all the panels, add new panels, and navigate between panels.
        </li>
       </ol>
      </div>
     </div>
    </div>
    <div class="columnLayout single" data-layout="single">
     <div class="cell normal" data-type="normal">
      <div class="innerCell">
       <h2 id="id-3.QueryTool-3.2CreatingaQuery">
        <span style="color: rgb(51,51,51);">
         3.2 Creating a Query
        </span>
       </h2>
       <h3 id="id-3.QueryTool-3.2.1i2b2ItemsforQuerying">
        3.2.1 i2b2 Items for Querying
       </h3>
       <p style="margin-left: 30.0px;">
        These items may be dragged into Query Groups to construct queries.
       </p>
       <div class="table-wrap">
        <table class="relative-table wrapped confluenceTable" style="width: 92.0373%;margin-left: 30.0px;">
         <colgroup>
          <col style="width: 5.30291%;"/>
          <col style="width: 11.0725%;"/>
          <col style="width: 78.7129%;"/>
         </colgroup>
         <tbody style="margin-left: 30.0px;">
          <tr style="margin-left: 30.0px;">
           <th class="highlight-green confluenceTh" data-highlight-colour="green" style="text-align: center;margin-left: 30.0px;">
            Icons
           </th>
           <th class="highlight-green confluenceTh" data-highlight-colour="green" style="text-align: center;">
            Names
           </th>
           <th class="highlight-green confluenceTh" data-highlight-colour="green" style="text-align: center;">
            Description
           </th>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p>
              <span class="confluence-embedded-file-wrapper">
               <img alt="leaf" class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/leaf.png" src="images/leaf.png"/>
              </span>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            Terms
           </td>
           <td class="confluenceTd">
            Terms (also called concepts) are the words or phrases that make up vocabularies. Terms are the basic query items.
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p>
              <span class="confluence-embedded-file-wrapper">
               <img alt="folder" class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/folder.png" src="images/folder.png"/>
              </span>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            Term Groups
           </td>
           <td class="confluenceTd">
            Related terms are grouped into hierarchies. When a term group is used in a query, all terms in the group are searched for.
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p>
              <span class="confluence-embedded-file-wrapper">
               <img alt="leaf" class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/modifier.png" src="images/modifier.png"/>
              </span>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            Modifiers
           </td>
           <td class="confluenceTd">
            Modifiers are descriptors that can be attached to terms to make small changes to them. For example, a Diagnosis concept may be additionally described by Modifiers "Principal Diagnosis" or "Secondary diagnosis."
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p>
              <span class="confluence-embedded-file-wrapper">
               <img alt="folder" class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/modifierFolder.png" src="images/modifierFolder.png"/>
              </span>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            Modifier Groups
           </td>
           <td class="confluenceTd">
            Groups of Modifiers, similar to Term Groups.
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p>
              <span class="confluence-embedded-file-wrapper">
               <img alt="prevQuery" class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/prevQuery.jpg" src="images/prevQuery.jpg"/>
              </span>
              /
              <span class="confluence-embedded-file-wrapper">
               <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/js-i2b2/cells/CRC/assets/sdx_CRC_QMT.gif" src="https://www.i2b2.org/webclient/js-i2b2/cells/CRC/assets/sdx_CRC_QMT.gif"/>
              </span>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            Previous Queries
           </td>
           <td class="confluenceTd">
            Previous Queries are queries that have been run before and are stored in the 'Previous Queries' panel.
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p>
              <span class="confluence-embedded-file-wrapper">
               <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/js-i2b2/cells/CRC/assets/sdx_CRC_PR.jpg" src="https://www.i2b2.org/webclient/js-i2b2/cells/CRC/assets/sdx_CRC_PR.jpg"/>
              </span>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            Individual Patients
           </td>
           <td class="confluenceTd">
            If selected when running a query, a query can return a Patient Set,
            <span>
             which is a set of patient numbers that satisfy the query criteria
            </span>
            . The Patient Set is stored with the query in the Previous Queries panel. The Patient Set can be expanded, and individual subjects dragged into query groups to be used in a new query.
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <div class="content-wrapper">
             <p>
              <span class="confluence-embedded-file-wrapper">
               <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/js-i2b2/cells/CRC/assets/sdx_CRC_PRS.jpg" src="https://www.i2b2.org/webclient/js-i2b2/cells/CRC/assets/sdx_CRC_PRS.jpg"/>
              </span>
             </p>
            </div>
           </td>
           <td class="confluenceTd">
            Patient Sets
           </td>
           <td class="confluenceTd">
            If selected when running a query, a query can return a Patient Set, which is a set of patient numbers that satisfy the query criteria.
            <span>
             The Patient Set is stored with the query in the Previous Queries panel and can be dragged into query groups to be used in a new query.
            </span>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            <div class="content-wrapper">
             <p>
              <span class="confluence-embedded-file-wrapper">
               <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/js-i2b2/cells/CRC/assets/sdx_CRC_PRS.jpg" src="https://www.i2b2.org/webclient/js-i2b2/cells/CRC/assets/sdx_CRC_PRS.jpg"/>
              </span>
             </p>
            </div>
           </td>
           <td class="confluenceTd" colspan="1">
            Encounter Sets
           </td>
           <td class="confluenceTd" colspan="1">
            <span>
             If selected when running a query, a query can return an Encounter Set, which is a set of encounter numbers that satisfy the query criteria. The Encounter Set is stored with the query in the Previous Queries panel
             <span>
              and can be dragged into query groups to be used in a new query
             </span>
             .
            </span>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <h3 id="id-3.QueryTool-3.2.1OperatorsandOrderofPrecedence">
        3.2.1 Operators and Order of Precedence
       </h3>
       <p style="margin-left: 30.0px;">
        i2b2 items are combined using Boolean operators
        <strong>
         AND
        </strong>
        and
        <strong>
         OR
        </strong>
        .
       </p>
       <p style="margin-left: 30.0px;">
        Items within each Group are first
        <strong>
         OR
        </strong>
        ed together. The Groups are then
        <strong>
         AND
        </strong>
        ed together.
       </p>
       <p style="margin-left: 30.0px;">
        <br/>
       </p>
       <p style="margin-left: 30.0px;">
        <em>
         <strong>
          Example 1 (AND):
         </strong>
        </em>
        This query finds patients with
        <em>
         Acute Myocardial Infarction
        </em>
        AND
        <em>
         Angina Pectoris
        </em>
        .
        <em>
         <strong>
          <br/>
         </strong>
        </em>
       </p>
       <p style="margin-left: 60.0px;">
        <span class="confluence-embedded-file-wrapper">
         <img class="confluence-embedded-image" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/9995284.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-2_14-47-34.png" data-linked-resource-id="9995284" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/9995021/9995284.png"/>
        </span>
       </p>
       <p style="margin-left: 30.0px;">
        <br/>
       </p>
       <p style="margin-left: 30.0px;">
        <em>
         <strong>
          Example 2 (OR):
         </strong>
         This query finds patients with
         <em>
          Acute Myocardial Infarction
         </em>
         <em>
          OR Angina Pectoris.
         </em>
         <br/>
        </em>
       </p>
       <p style="margin-left: 60.0px;">
        <span class="confluence-embedded-file-wrapper">
         <img class="confluence-embedded-image" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/9995283.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-2_14-43-50.png" data-linked-resource-id="9995283" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/9995021/9995283.png"/>
        </span>
       </p>
       <p style="margin-left: 30.0px;">
        <br/>
       </p>
       <p style="margin-left: 30.0px;">
        <strong>
         Example 3 (AND of ORs)
        </strong>
        : This query finds patients with (
        <em>
         Acute Myocardial Infarction
        </em>
        <em>
         OR Angina Pectoris) AND
        </em>
        who are
        <em>
         male.
        </em>
       </p>
       <p style="margin-left: 180.0px;">
        *Note that the OR expression in the parentheses is evaluated first.
       </p>
       <p style="margin-left: 60.0px;">
        <span class="confluence-embedded-file-wrapper">
         <img class="confluence-embedded-image" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/9995282.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-2_14-41-51.png" data-linked-resource-id="9995282" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/9995021/9995282.png"/>
        </span>
       </p>
       <h3 id="id-3.QueryTool-3.2.2Constraints">
        3.2.2 Constraints
       </h3>
       <p style="margin-left: 30.0px;">
        <strong>
         Constraints
        </strong>
        are used to narrow down the search criteria to a particular time frame, number of occurrences or a specific value or range of values. In i2b2, there are several types of constraints that can be defined in the Query Tool view.
       </p>
       <ol>
        <li>
         Group Constraints
        </li>
       </ol>
       <ol>
        <li style="list-style-type: none;background-image: none;">
         <ol>
          <li>
           <strong>
            Date Constraint
           </strong>
           <ol>
            <li>
             Setting Date Constraint for the entire Group
             <br/>
             <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
              <img class="confluence-embedded-image confluence-thumbnail" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/12386647.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-8_15-27-4.png" data-linked-resource-id="12386647" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" height="220" src="attachments/9995021/12386647.png"/>
             </span>
             <br/>
             <br/>
             <br/>
             Clicking on 'Dates' will display a dialog box in which a date range can be selected to restrict the occurrences of the items in the Group to within that range. Check one or both of the check boxes to indicate whether there is a begin date (From) or an end date (To) or both.
             <br/>
             <br/>
             <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
              <img class="confluence-embedded-image" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/12386648.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-8_15-27-38.png" data-linked-resource-id="12386648" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" height="210" src="attachments/9995021/12386648.png"/>
             </span>
             <br/>
             <br/>
             Then type the date directly in the text box or click on the drop-down arrow to open the calendar below to select a date. This will set the date range for all items in this Group.
             <br/>
             <br/>
             <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
              <img class="confluence-embedded-image confluence-thumbnail" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/12386649.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-8_15-28-6.png" data-linked-resource-id="12386649" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" height="201" src="attachments/9995021/12386649.png"/>
             </span>
             <br/>
             <br/>
            </li>
            <li>
             Setting Date Constraint on individual items.
             <br/>
             Sometimes only some items in the Group need date constraints or different items in one group require different date constraints. In this case, right click on an item and select
             <strong>
              Set Date Constraint
             </strong>
             to set the date constraint for that item specifically.
             <br/>
             <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
              <img class="confluence-embedded-image" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/12386651.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-8_15-32-41.png" data-linked-resource-id="12386651" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" height="135" src="attachments/9995021/12386651.png"/>
             </span>
             <br/>
             <br/>
             <br/>
            </li>
            <li>
             Once a date constraint is applied,
             <strong>
              Dates
             </strong>
             <span>
              will now be underlined to indicate a date constraint has been set.
             </span>
             <br/>
             <br/>
             <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
              <img class="confluence-embedded-image confluence-thumbnail" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/12386650.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-8_15-29-7.png" data-linked-resource-id="12386650" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" height="87" src="attachments/9995021/12386650.png"/>
             </span>
             <br/>
             <p>
              <br/>
             </p>
            </li>
           </ol>
          </li>
          <li>
           <strong>
            Occurrence Constraint
           </strong>
           <br/>
           <p>
            Users can define the number of times an item must occur for each subject.
           </p>
           <h5 id="id-3.QueryTool-Clickon'Occurs&gt;0x'">
            Click on 'Occurs&gt;0x'
           </h5>
           <p>
            <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
             <img class="confluence-embedded-image confluence-thumbnail" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/12386652.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-8_15-33-25.png" data-linked-resource-id="12386652" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" height="221" src="attachments/9995021/12386652.png"/>
            </span>
            <br/>
            <br/>
           </p>
           <p>
            A new window will open
            <br/>
            <br/>
           </p>
           <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
            <img class="confluence-embedded-image" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/12386653.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="image2019-5-8_15-33-46.png" data-linked-resource-id="12386653" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" height="143" src="attachments/9995021/12386653.png"/>
           </span>
           <br/>
           <p>
            <br/>
            Click on the
            <strong>
             drop-down arrow
            </strong>
            to display a list of numbers.
            <br/>
            Select a number from the list.
           </p>
           <p>
            <br/>
           </p>
           <p>
            <br/>
           </p>
           <span class="confluence-embedded-file-wrapper">
            <img alt="qtConstOccurSelection" class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtConstOccurSelection.png" src="images/qtConstOccurSelection.png"/>
           </span>
           <p>
            <span style="letter-spacing: 0.0px;">
             Click on the
            </span>
            <strong style="letter-spacing: 0.0px;">
             OK
            </strong>
            button
            <span style="letter-spacing: 0.0px;">
             .
            </span>
           </p>
           <p>
            <strong style="letter-spacing: 0.0px;">
             Occurs &gt; 0x
            </strong>
            <span style="letter-spacing: 0.0px;">
             will now be underlined to indicate a constraint has been set and the 0 will be replaced with the selected number.
            </span>
           </p>
           <p>
            <span class="confluence-embedded-file-wrapper">
             <img alt="qtConstOccurSet" class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtConstOccurSet.png" src="images/qtConstOccurSet.png"/>
            </span>
           </p>
           <p>
            <span style="letter-spacing: 0.0px;">
             <br/>
            </span>
           </p>
           <p>
            <br/>
           </p>
          </li>
          <li>
           Exclusion
           <span class="confluence-embedded-file-wrapper image-right-wrapper confluence-embedded-manual-size">
            <img class="confluence-embedded-image image-right" data-base-url="https://community.i2b2.org/wiki" data-image-src="attachments/9995021/12387209.png" data-linked-resource-container-id="9995021" data-linked-resource-container-version="79" data-linked-resource-content-type="image/png" data-linked-resource-default-alias="screenshot_1680.png" data-linked-resource-id="12387209" data-linked-resource-type="attachment" data-linked-resource-version="1" data-unresolved-comment-count="0" src="attachments/9995021/12387209.png" width="400"/>
           </span>
           <br/>
           Constraint will not include patients with the concepts listed in the panel.
           <p>
            <span>
             Click on the Exclude button located in the selection criteria section of the panel.
            </span>
           </p>
           <p>
            <span>
             The text in the information box will change to "none of these" and the background color will change to pink.
            </span>
           </p>
          </li>
          <li>
           Value Constraints (eg. labs)
           <br/>
           Constraint is by the value associated to a concept or modifier. Not all items have values.
           <span>
            The value constraint window will open automatically when you drop a concept into a panel in the Query Tool view. To set the constraint at a later time, right click on the item in the panel and select Set Value.
           </span>
           <br/>
           <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
            <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtConstValSelect.png" height="40" src="images/qtConstValSelect.png"/>
           </span>
           <br/>
           <ol>
            <li>
             Numeric
             <br/>
             <p>
              The numeric value is defined in the source system when the result is entered. Enter a numerical value at the Please enter a value field.
             </p>
             <p>
              <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
               <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtConstValEnterVal.png" height="41" src="images/qtConstValEnterVal.png"/>
              </span>
             </p>
             <p>
              <span style="letter-spacing: 0.0px;">
               Unlike flag and text values, numeric values use operators, such as greater than or less than when setting the constraints.
              </span>
             </p>
             <p style="margin-left: 60.0px;">
              <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
               <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtConstValOperator.png" height="150" src="images/qtConstValOperator.png"/>
              </span>
             </p>
             <p>
              The Units will default to the normal units defined for the item.
              <span>
               Click on the drop-down arrow to change the units.
              </span>
             </p>
             <p>
              <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
               <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtConstValUnitsList.png" height="203" src="images/qtConstValUnitsList.png"/>
              </span>
              <br/>
              (In order for unit conversion to work a parameter called CRC_ENABLE_UNITCD_CONVERSION must be defined for the project. If this is not defined you need to contact your system administrator.)
             </p>
            </li>
            <li>
             Categorical
             <br/>
             <br/>
            </li>
            <li>
             Text
             <br/>
             <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
              <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtConstValCkmb2.png" height="250" src="images/qtConstValCkmb2.png"/>
             </span>
            </li>
           </ol>
           <br/>
           <ol>
            <li>
             Flags (high, low, etc.)
             <br/>
             <br/>
            </li>
            <li>
             Modifier Value Constraints
             <br/>
             <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
              <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtConstValTrimoxFreq2.png" height="250" src="images/qtConstValTrimoxFreq2.png"/>
             </span>
            </li>
           </ol>
          </li>
         </ol>
        </li>
       </ol>
       <h3 id="id-3.QueryTool-3.2.3QueryTiming(inprogress)">
        3.2.3 Query Timing
        <span style="color: rgb(255,0,0);">
         (in progress)
        </span>
       </h3>
       <ol>
        <li>
         Independent
         <ul>
          <li>
           <p class="auto-cursor-target">
            The items (facts) can occur at any time in the patient's history.
           </p>
           <div class="projectdoc-information-macro projectdoc-information-macro-example" data-projectdoc-box-type="example" title="Example">
            <p class="title">
             Example
            </p>
            <span class="aui-icon aui-icon-small projectdoc-information-macro-icon">
            </span>
            <div class="projectdoc-information-macro-body">
             <p>
              <span>
               Patient has a medication with a dose greater than 500 mg and a medication that is taken once a day documented at any time in their history.
              </span>
             </p>
             <p>
              RESULTS: there are 47 patients who have had a medication with a dose of 500 mg and a frequency of once a day entered as a fact in the observation_fact table, where medication dose and frequency have the
              <span>
               same
              </span>
              patient_num.
             </p>
            </div>
           </div>
          </li>
         </ul>
        </li>
        <li>
         Same Financial Encounter
         <ol>
          <li style="list-style-type: circle;">
           <p>
            The items (facts) occur during the same visit (financial encounter).
           </p>
          </li>
          <li style="list-style-type: circle;">
           <p>
            Temporal constraint has to be set to Same financial encounter in order to be available for selection
           </p>
           <div class="projectdoc-information-macro projectdoc-information-macro-example" data-projectdoc-box-type="example" title="Example">
            <p class="title">
             Example
            </p>
            <span class="aui-icon aui-icon-small projectdoc-information-macro-icon">
            </span>
            <div class="projectdoc-information-macro-body">
             <p>
              <span>
               Patient has a diagnosis of Acute MI documented at any time in their history and they have a medication with a dose greater than 500 mg and a medication that is taken once a day documented during the same visit.
              </span>
             </p>
             <p>
              RESULTS: there are 4 patients who have had a medication with a dose greater than 500 mg and a frequency of once a day entered as a fact in the observation_fact table, where the medication dose and frequency have the
              <span>
               same
              </span>
              encounter_num AND the diagnosis of acute MI, the medication dose and frequency all have the
              <span>
               same
              </span>
              patient_num
             </p>
            </div>
           </div>
           <p>
            <br/>
           </p>
          </li>
         </ol>
        </li>
        <li>
         Same Observation
         <ol>
          <li style="list-style-type: circle;">
           <p>
            The items (facts) occur during the same visit (financial encounter) AND the same instance.
           </p>
          </li>
          <li style="list-style-type: circle;">
           <p>
            Temporal constraint has to be set to Items instance will be the same in order to be available for selection.
           </p>
           <div class="projectdoc-information-macro projectdoc-information-macro-example" data-projectdoc-box-type="example" title="Example">
            <p class="title">
             Example
            </p>
            <span class="aui-icon aui-icon-small projectdoc-information-macro-icon">
            </span>
            <div class="projectdoc-information-macro-body">
             <p>
              <span>
               Patient has a diagnosis of Acute MI documented at any time in their history and they have a medication with a dose greater than 500 mg and a medication that is taken once a day documented during the same instance.
              </span>
             </p>
             <p>
              RESULTS: there are 3 patients who have had a medication with a dose of 500 mg and a frequency of once a day entered as a fact in the observation_fact table, where the medication dose and frequency have the
              <span>
               same
              </span>
              encounter_num , concept_cd, provider_id, start_date, AND instance_num AND the diagnosis of acute MI, the medication dose and frequency all have the
              <span>
               same
              </span>
              patient_num
             </p>
            </div>
           </div>
          </li>
         </ol>
        </li>
        <li>
         Temporal Query
         <span style="color: rgb(255,0,0);">
          (in progress)
         </span>
        </li>
       </ol>
       <h3 id="id-3.QueryTool-3.2.4ReloadingaPreviousQuery(inprogress)">
        3.2.4 Reloading a Previous Query
        <span style="color: rgb(255,0,0);">
         (in progress)
        </span>
       </h3>
       <h3 id="id-3.QueryTool-3.2.5ResettingtheQueryTool(inprogress)">
        3.2.5 Resetting the Query Tool
        <span style="color: rgb(255,0,0);">
         (in progress)
        </span>
       </h3>
       <h2 id="id-3.QueryTool-3.3RunningaQuery">
        3.3 Running a Query
       </h2>
       <h3 id="id-3.QueryTool-3.3.1RunQuery">
        3.3.1 Run Query
       </h3>
       <p style="margin-left: 30.0px;">
        Once the query criterion has been defined, the final steps are to click on the Run Query button, select the result type(s), and click on the OK button to run the query.
       </p>
       <p style="margin-left: 60.0px;">
        <span>
         Once you have defined the search criteria click on the
        </span>
        <span>
         Run Query button
        </span>
        <span>
         located on the toolbar at the bottom of the
        </span>
        <span>
         Query Tool view
        </span>
        <span>
         .
        </span>
        <span>
         A new window will open.
        </span>
       </p>
       <ul>
        <li style="list-style-type: none;background-image: none;">
         <ul>
          <li>
           <span>
            A name for the query will default at the query name field.
           </span>
           <span>
            Either change the name of the query or accept the default.
           </span>
          </li>
          <li>
           <span>
            In the query result type section, click on the
           </span>
           <span>
            checkboxes
           </span>
           <span>
            for those
           </span>
           <span>
            result types
           </span>
           <span>
            you want to include when the query is run.
           </span>
          </li>
          <li>
           <span>
            Click on the
           </span>
           <span>
            OK button
           </span>
           <span>
            .
           </span>
          </li>
          <li>
           <span>
            The Run Query window will close and the querying process will begin
           </span>
          </li>
         </ul>
        </li>
       </ul>
       <p style="margin-left: 60.0px;">
        Once you begin the process of running the query the Query Status view will display "Running Query", the name of the query, and the time that has elapsed.
       </p>
       <p style="margin-left: 60.0px;">
        <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
         <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtRunQueryWindow.png" height="250" src="images/qtRunQueryWindow.png"/>
        </span>
       </p>
       <h3 id="id-3.QueryTool-3.3.2QueryResultOptions">
        3.3.2 Query Result Options
       </h3>
       <p>
        There are three categories of query type: counts, sets, and breakdowns. (Note that the Timeline type is not used in the Web Client. If selected it will work the same as patient set.)
       </p>
       <h4 id="id-3.QueryTool-1)NumberofPatients">
        1) Number of Patients
       </h4>
       <p>
        This option will return a total count for those patients who meet the defined criteria. This is the most common and fastest query type.
       </p>
       <p>
        <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
         <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtQueryStatusPtCount.png" height="150" src="images/qtQueryStatusPtCount.png"/>
        </span>
       </p>
       <h4 id="id-3.QueryTool-2)Patient/EncounterSet">
        2) Patient/Encounter Set
       </h4>
       <p>
        These options return a set of patients or encounters that meet the defined criteria. The set is visible in the Previous Query view and can be used in future queries, the workspace, and by plugins.
       </p>
       <p>
        <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
         <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/pqPtSet.png" height="141" src="images/pqPtSet.png"/>
        </span>
       </p>
       <p>
        Only information on the query's completion is shown in the Query Status panel.
       </p>
       <p>
        <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
         <img class="confluence-embedded-image confluence-external-resource" data-image-src="https://www.i2b2.org/webclient/help/images/qtQueryStatusPtSet.png" height="141" src="images/qtQueryStatusPtSet.png"/>
        </span>
       </p>
       <h4 id="id-3.QueryTool-4)PatientBreakdowns">
        4) Patient Breakdowns
       </h4>
       <p>
        The following query types will return patient counts stratified by the selected breakdown category (e.g., Gender or Age).
       </p>
       <p>
        <span>
         breakdown
        </span>
       </p>
       <div class="table-wrap">
        <table class="wrapped confluenceTable">
         <colgroup>
          <col/>
         </colgroup>
         <tbody>
          <tr>
           <th class="confluenceTh">
            Breakdown type
           </th>
          </tr>
          <tr>
           <td class="confluenceTd">
            <span>
             Gender patient breakdown
            </span>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <span>
             Vital Status patient breakdown
            </span>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <span>
             Race patient breakdown
            </span>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd">
            <span>
             Age patient breakdown
            </span>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            Length of Stay breakdown
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            <p>
             Top 20 Medications Breakdown
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            <p>
             Top 20 diagnoses Breakdown
            </p>
           </td>
          </tr>
          <tr>
           <td class="confluenceTd" colspan="1">
            <p>
             Inpatient and Outpatient Breakdown
            </p>
           </td>
          </tr>
         </tbody>
        </table>
       </div>
       <p>
        <br/>
       </p>
       <h3 id="id-3.QueryTool-3.3.3.QueryStatus(inprogress)">
        3.3.3. Query Status
        <span style="color: rgb(255,0,0);">
         (in progress)
        </span>
       </h3>
       <h4 id="id-3.QueryTool-1)Running">
        1) Running
       </h4>
       <h4 id="id-3.QueryTool-2)Finished">
        2) Finished
       </h4>
       <h4 id="id-3.QueryTool-3)Queued">
        3) Queued
       </h4>
       <h4 id="id-3.QueryTool-4)Error">
        4) Error
       </h4>
       <h2 id="id-3.QueryTool-3.4ExampleQueries(inprogress)">
        3.4 Example Queries
        <span style="color: rgb(255,0,0);">
         (in progress)
        </span>
       </h2>
       <h4 id='id-3.QueryTool-i.SimpleQuery:"FindingpatientswithadiagnosisAoradiagnosisBorhaslabtestC."'>
        i. Simple Query: "Finding patients with a diagnosis A or a diagnosis B or has lab test C."
       </h4>
       <h4 id="id-3.QueryTool-ii.RunningaPreviousQuery">
        ii. Running a Previous Query
       </h4>
       <h4 id="id-3.QueryTool-iii.TemporalQuery(Simple)">
        iii. Temporal Query (Simple)
       </h4>
       <h4 id="id-3.QueryTool-iv.HowtofindPatientswith&gt;1diagnosisXOR&gt;1diagnosisY(Usingnestedqueries)">
        iv.  How to find Patients with &gt;1 diagnosis X OR &gt;1 diagnosis Y  (Using nested queries)
       </h4>
      </div>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>
